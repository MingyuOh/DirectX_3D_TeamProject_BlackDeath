#pragma once
#include "BCamera.h"
#include "BBoundingBox.h"

#define CAMERA_RUN_SPEED 2.0
#define CAMERA_REBOUND_VALUE 0.6

class BFPSCamera :public BCamera
{
public:
	BBoundingBox	m_CameraBoundingBox;	// FPS 카메라 충돌
	TVector3		m_vMapNormal;			// 맵 노말
	TVector3		m_vHeroLook;			// 히어로 Look벡터
	TVector3		m_vHeroUp;				// 히어로 Up벡터
	TVector3		m_vHeroSide;			// 히어로 Side벡터
	TVector3		m_vBeforeCameraPos;		// 카메라 이전위치 
	bool			m_bCheckMap;			// 맵 이동 가능 지형 체크
public:
	//--------------------------------------------------------------------------------------
	// 히어로 포지션 셋팅 함수
	//--------------------------------------------------------------------------------------
	void SetHeroPosition(TVector3* pHeroPos);
	//--------------------------------------------------------------------------------------
	// FPS 카메라 뷰 생성 함수
	//--------------------------------------------------------------------------------------
	bool SetViewMatrix(TVector3 vPos, TVector3 vTarget, TVector3 vUp);
	//--------------------------------------------------------------------------------------
	// FPS 카메라 쿼터니언 업데이트 함수
	//--------------------------------------------------------------------------------------
	bool UpdateQuaternion();
	//--------------------------------------------------------------------------------------
	// FPS 카메라 Y값 셋팅 함수
	//--------------------------------------------------------------------------------------
	void SetCameraPosY(float fY);
	//--------------------------------------------------------------------------------------
	// FPS 카메라 맵 노말벡터 셋팅 함수
	//--------------------------------------------------------------------------------------
	void SetMapNormal(TVector3 vMapNormal);
	//--------------------------------------------------------------------------------------
	// FPS 카메라 미끌림 처리 함수
	//--------------------------------------------------------------------------------------
	void ProcessingSlip(float fSpeed);
	//--------------------------------------------------------------------------------------
	// FPS 카메라 프레임 함수
	//--------------------------------------------------------------------------------------
	bool Frame();
	//--------------------------------------------------------------------------------------
	// FPS 카메라 걷는 함수
	//--------------------------------------------------------------------------------------
	void Walk();
	//--------------------------------------------------------------------------------------
	// FPS 카메라 달리는 함수
	//--------------------------------------------------------------------------------------
	void Run();
	//--------------------------------------------------------------------------------------
	// 히어로 바운딩박스 정보 가져오는 함수
	//--------------------------------------------------------------------------------------
	void SetHeroBoundingBoxInfo(BBoundingBox heroBoundingBox);
	//--------------------------------------------------------------------------------------
	// FPS 카메라 vs 오브젝트 충돌처리 함수
	//--------------------------------------------------------------------------------------
	void CameraToObjectCollision(BBoundingBox& objectBox);
	//--------------------------------------------------------------------------------------
	// FPS 카메라 라이플 발동시 반동처리 함수
	//--------------------------------------------------------------------------------------
	void CameraRebound();
public:
	BFPSCamera();
	virtual ~BFPSCamera();
};

