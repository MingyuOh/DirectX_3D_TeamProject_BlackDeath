#pragma once
#include "BObjStd.h"

class Object
{
public:
	//--------------------------------------------------------------------------------------
	// 버텍스 버퍼 및 레이아웃
	//--------------------------------------------------------------------------------------
	ID3D11InputLayout*							m_pVertexLayout;
	ID3D11Buffer*								m_pVertexBuffer;
	ID3D11Buffer*								m_pIndexBuffer;
	ID3D11Buffer*								m_pConstantBuffer;
	//--------------------------------------------------------------------------------------
	// 버텍스 및 픽셀 쉐이더
	//--------------------------------------------------------------------------------------
	ID3D11VertexShader*							m_pVS;
	ID3D11PixelShader*							m_pPS;
	ID3D11GeometryShader*						m_pGS;
	//--------------------------------------------------------------------------------------
	// Vertex List
	//--------------------------------------------------------------------------------------
	vector<PNCT_Vertex>							m_VertexList;
	vector<DWORD>								m_IndexList;
	VSConstantB									m_cbData;
	UINT										m_iNumVertex;
	UINT										m_iNumIndex;
	//--------------------------------------------------------------------------------------
	// 텍스쳐 로딩 및 리소스버퍼 생성
	//--------------------------------------------------------------------------------------
	vector<ComPtr<ID3D11ShaderResourceView>>	m_pTextureSRV;
	//--------------------------------------------------------------------------------------
	// 텍스쳐 이름 / 개수
	//--------------------------------------------------------------------------------------
	vector<basic_string<TCHAR>>					m_szTextureName;
	int											m_iTextureCount;
	//--------------------------------------------------------------------------------------
	// 뷰, 투영 행렬 
	//--------------------------------------------------------------------------------------
	D3DXMATRIX									m_matWorld;
	D3DXMATRIX									m_matView;
	D3DXMATRIX									m_matProj;
	//--------------------------------------------------------------------------------------
	// 오브젝트 위치
	//--------------------------------------------------------------------------------------
	D3DXVECTOR3									m_vPos;
	D3DXVECTOR3									m_vLook;
	//--------------------------------------------------------------------------------------
	// 디바이스 장치
	//--------------------------------------------------------------------------------------
	ID3D11Device*								m_pd3dDevice;
	ID3D11DeviceContext*						m_pContext;
public:
	//--------------------------------------------------------------------------------------
	// 삼각형 생성 및 초기화
	//--------------------------------------------------------------------------------------
	virtual		HRESULT			Create(ID3D11Device* pd3dDevice, ID3D11DeviceContext* pImmediateContext,
									    TCHAR* TextureName = NULL, TCHAR* vertexShaderName = NULL, 
									    TCHAR* PixelShaderName = NULL, TCHAR* geometryShaderName = NULL);
	//--------------------------------------------------------------------------------------
	// 정점 버퍼 생성
	//--------------------------------------------------------------------------------------
	virtual		HRESULT			CreateVertexBuffer();
	//--------------------------------------------------------------------------------------
	// 인덱스 버퍼 생성
	//--------------------------------------------------------------------------------------
	virtual		HRESULT			CreateIndexBuffer();
	//--------------------------------------------------------------------------------------
	// 상수 버퍼 생성
	//--------------------------------------------------------------------------------------
	virtual		HRESULT			CreateConstantBuffer();
	//--------------------------------------------------------------------------------------
	// 정점 및 픽셀 쉐이딩 로딩 및 생성
	//--------------------------------------------------------------------------------------
	virtual		HRESULT			LoadShaderAndInputLayout(TCHAR* vertexShaderName = NULL,
											 TCHAR* PixelShaderName = NULL, TCHAR* geometryShaderName = NULL);
	//--------------------------------------------------------------------------------------
	// 텍스처 불러오기 / 적용
	//--------------------------------------------------------------------------------------
	HRESULT						LoadTexture(ID3D11Device* pDevice, TCHAR* strFilePath, int iIndex = 0);
	bool						ApplyTexture(ID3D11DeviceContext* pImmediateContext, int iIndex = 0);
	//--------------------------------------------------------------------------------------
	// 행렬(뷰, 투영) 생성
	//--------------------------------------------------------------------------------------
	bool						SetMatrix(D3DXMATRIX* matWorld, D3DXMATRIX* matView, D3DXMATRIX* matProj);
	//--------------------------------------------------------------------------------------
	// 오브젝트 위치 저장
	//--------------------------------------------------------------------------------------
	void						SetPosition(D3DXVECTOR3 vPos);
public:
	bool						Init();
	bool						Frame();
	virtual bool				Render();
	bool						Release();
public:
	Object();
	~Object();
};

